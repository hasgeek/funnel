{% extends "notifications/layout_web.html.jinja2" %}
{%- from "macros.html.jinja2" import project_title %}
{%- from "baseframe/components.html.jinja2" import faicon %}

{% block content %}
  {%- if view.is_rollup %}
    <p>
      {%- trans project=project_title(project), project_url=project.url_for(), count=view.fragments|length %}
        Your project <a href="{{ project_url }}">{{ project }}</a> has received {{ count }} new proposals:
      {%- endtrans %}
    </p>
    <ol>
      {%- for proposal in view.fragments %}
        <li>{% trans url=proposal.url_for(), proposal=proposal.title, actor=proposal.owner.pickername, age=proposal.datetime|age %}
          <a href="{{ url }}">{{ proposal }}</a> by {{ actor }} <span class="mui--text-body2">{{ age }}</span>
        {% endtrans %}</li>
      {%- endfor %}
    </ol>
  {%- else %}
    <p>
      {% trans project=project_title(project), project_url=project.url_for(), proposal=proposal.title, proposal_url=proposal.url_for(), actor=view.actor.pickername -%}
        Your project <a href="{{ project_url }}">{{ project }}</a> has received a new proposal: <a href="{{ proposal_url }}">{{ proposal }}</a> from {{ actor }}.
      {%- endtrans %}
    </p>
  {%- endif %}
{%- endblock %}

{%- block avatar %}
  {%- if view.is_rollup %}
    <div class="user__box__gravatar user__box__gravatar--initials">{{ faicon(icon='users', icon_size='headline', baseline=false) }}</div>
  {%- else %}
    {%- if view.actor %}{{ useravatar(view.actor) }}{% endif %}
  {%- endif %}
{%- endblock %}
