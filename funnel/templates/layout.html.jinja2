{% extends "baseframe.html.jinja2" -%}
{% from "baseframe/components.html.jinja2" import hgtopnav with context %}

{% block description %}{% if g.profile %}{{ g.profile.description|striptags }}{% endif %}{% endblock %}

{% block sidedrawer -%}
{%- endblock %}

{% block header -%}
  {% macro site_title() %}
    {%- if g.profile -%}
      <a href="{{ url_for('index') }}" class="header__site-title__item">
        {%- if config['LEGACY'] -%}
          <img src="{{ url_for('static', filename='img/funnel-logo.png') }}" class="header__site-title__logo header__site-title__logo--funnel"/>
        {%- else -%} 
         <img src="{{ url_for('static', filename='img/hg-logo.png') }}" class="header__site-title__logo"/>
        {%- endif -%}
      </a><i class="material-icons mui--text-subhead mui--align-center">chevron_right</i>
      <a href="{{ g.profile.url_for() }}" class="header__site-title__item mui--text-dark">{{ g.profile.title }}</a>
      {%- if project %}
        {%- if project.parent_project %}
          <i class="material-icons mui--text-subhead mui--align-center">chevron_right</i>
          <a href="{{ project.parent_project.url_for() }}" class="header__site-title__item">{{ project.parent_project.short_title() }}</a>
        {%- endif %}
        <i class="material-icons mui--text-subhead mui--align-center">chevron_right</i>
        <a href="{{ project.url_for() }}" class="header__site-title__item">{{ project.short_title() }}</a>
      {%- endif %}
    {%- else -%}
      <a href="{{ url_for('index') }}" class="header__site-title__item">
        {%- if config['LEGACY'] -%}
          <img src="{{ url_for('static', filename='img/funnel-logo.png') }}" class="header__site-title__logo header__site-title__logo--margin header__site-title__logo--funnel"/>
        {%- else -%} 
         <img src="{{ url_for('static', filename='img/hg-logo.png') }}" class="header__site-title__logo header__site-title__logo--margin"/>
        {%- endif -%}
        {{ config['SITE_TITLE'] }}
      </a>
    {%- endif -%}
  {% endmacro %}
  {{ hgtopnav(site_title=site_title()) }}
{%- endblock %}

{% block bodytag %}<body class="mui--bg-primary">{% endblock %}

{% block contenthead %}
  {% block banner %}
  {% endblock %}
  {% block headline -%}
    <div class="content-head content-head--top-padding mui--bg-accent">
      <div class="mui-container">
        <div class="grid">
          <div class="grid__col-xs-12">
            {% block top_title %}
            <h1 class="mui--text-display1">
              {{ self.title()|e }}
            </h1>
            {% endblock %}
          </div>
        </div>
      </div>
    </div>
  {%- endblock %}
{% endblock %}

{%- block baseheadline %}
  {% block ads %}
  {% endblock %}
{% endblock %}

{% block basecontent %}
  <div class="page-content">
    {% block contentwrapper %}
    <div class="grid">
      <div class="grid__col-xs-12">
        {% block content %}{% endblock %}
      </div>
    </div>
    {% endblock %}
  </div>
{% endblock %}

{% block footer %}
  {%- if config['LEGACY'] -%}
  <div class="mui-container">
    <div class="grid mui--text-body2 mui--text-left">
      <div class="grid__col-sm-12 mui--text-center">
        <p>{% if 'FOOTER_MESSAGE' in config %}{{ config['FOOTER_MESSAGE'] }}{% else %}{% trans %} Copyright &copy; 2010-19 HasGeek.  All rights reserved.{% endtrans %}{% endif %} <a href="/about/" title="about"><br>About us and site policies</a>.</p>
        <p>
          #2699, 19th Main, 5th Cross, <br>HAL 2nd stage, Indiranagar, Bangalore - 560008 <br><a href="mailto:info@hasgeek.com" title="mailto">info@hasgeek.com</a>, <a href="tel:+917676332020" title="tel">+91 7676 33 2020</a>
        </p>
      </div>
      </div>
    </div>
  </div>
  {%- else -%}
    <span class="no-print">{% if 'FOOTER_MESSAGE' in config %}{{ config['FOOTER_MESSAGE'] }}{% else %}{% trans %}Copyright &copy; 2010-19 HasGeek{% endtrans %}{% endif %}</span>
  {%- endif -%}
{% endblock %}

{% block jquery -%}
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript">
  if (typeof jQuery === 'undefined')
    document.write('<script type="text/javascript" src="{{ url_for("baseframe.static", filename="js/jquery-2.2.4.min.js") }}"><\/script>');
</script>
{%- endblock %}

{% block layoutscripts %}
  <script type="text/javascript">
    $(function() {
      window.Talkfunnel.Utils.collapse();
      window.Talkfunnel.Utils.smoothScroll();

      // Send click events to Google analytics
      $('.mui-btn, a').click(function(event) {
        var action = $(this).attr('data-action') || $(this).attr('title') || $(this).html();
        var target = $(this).attr('href') || '';
        if (typeof ga !== "undefined") {
          ga('send', { hitType: 'event', eventCategory: 'click', eventAction: action, eventLabel: label});
        }
      });
    });
  </script>
  {% block footerscripts %}{% endblock %}
{% endblock %}
