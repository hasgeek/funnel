{% extends "baseframe.html.jinja2" -%}
{% from "baseframe/components.html.jinja2" import hgtopnav with context %}

{% block description %}{% if g.profile %}{{ g.profile.description|striptags }}{% endif %}{% endblock %}

{% block sidedrawer -%}
{%- endblock %}

{% block header -%}
  {% macro site_title() %}
    {%- if g.profile -%}
      <a href="{{ url_for('index') }}" class="header__site-title__item">
        {%- if config['LEGACY'] -%}
          <img src="{{ url_for('static', filename='img/funnel-logo.png') }}" class="header__site-title__logo header__site-title__logo--funnel"/>
        {%- else -%} 
         <img src="{{ url_for('static', filename='img/hg-logo.png') }}" class="header__site-title__logo"/>
        {%- endif -%}
      </a><i class="material-icons mui--text-subhead mui--align-center">chevron_right</i>
      <a href="{{ g.profile.url_for() }}" class="header__site-title__item mui--text-dark">{{ g.profile.title }}</a>
      {%- if project %}
        {%- if project.parent_project %}
          <i class="material-icons mui--text-subhead mui--align-center">chevron_right</i>
          <a href="{{ project.parent_project.url_for() }}" class="header__site-title__item">{{ project.parent_project.short_title() }}</a>
        {%- endif %}
        <i class="material-icons mui--text-subhead mui--align-center">chevron_right</i>
        <a href="{{ project.url_for() }}" class="header__site-title__item">{{ project.short_title() }}</a>
      {%- endif %}
    {%- else -%}
      <a href="{{ url_for('index') }}" class="header__site-title__item">
        {%- if config['LEGACY'] -%}
          <img src="{{ url_for('static', filename='img/funnel-logo.png') }}" class="header__site-title__logo header__site-title__logo--margin header__site-title__logo--funnel"/>
        {%- else -%} 
         <img src="{{ url_for('static', filename='img/hg-logo.png') }}" class="header__site-title__logo header__site-title__logo--margin"/>
        {%- endif -%}
        {{ config['SITE_TITLE'] }}
      </a>
    {%- endif -%}
  {% endmacro %}
  {{ hgtopnav(site_title=site_title()) }}
{%- endblock %}

{% block bodytag %}<body class="mui--bg-primary">{% endblock %}

{% block contenthead %}
  {% block banner %}
  {% endblock %}
  {% block headline -%}
    <div class="content-head content-head--top-padding mui--bg-accent">
      <div class="mui-container">
        <div class="grid">
          <div class="grid__col-xs-12">
            {% block top_title %}
            <h1 class="mui--text-display1">
              {{ self.title()|e }}
            </h1>
            {% endblock %}
          </div>
        </div>
      </div>
    </div>
  {%- endblock %}
{% endblock %}

{%- block baseheadline %}
  {% block ads %}
  {% endblock %}
{% endblock %}

{% block basecontent %}
  <div class="page-content">
    {% block contentwrapper %}
    <div class="grid">
      <div class="grid__col-xs-12">
        {% block content %}{% endblock %}
      </div>
    </div>
    {% endblock %}
  </div>
{% endblock %}

{% block jquery -%}
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript">
  if (typeof jQuery === 'undefined')
    document.write('<script type="text/javascript" src="{{ url_for("baseframe.static", filename="js/jquery-2.2.4.min.js") }}"><\/script>');
</script>
{%- endblock %}

{% block layoutscripts %}
  <script src="{{ url_for('static', filename=asset_path('app')) }}" type="text/javascript"></script>
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-19123154-1', 'auto');
    ga('send', 'pageview');
  </script>
  {% block footerscripts %}{% endblock %}
{% endblock %}
