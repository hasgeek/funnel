{% set current_page = 'participants' %}
{% extends "project_layout.html.jinja2" %}
{% block title %}{% trans %}View participants{% endtrans %}{% endblock title %}

{% block left_col %}
  <div class="page-card page-card--nomargin">
    <div class="project-section mui-table--responsive-wrapper">
      <table class="mui-table mui-table--bordered mui-table--responsive participants">
        <thead>
          <tr>
            <th data-sorted="true">{% trans %}Name{% endtrans %}</th>
            <th data-sorted="true">{% trans %}Email/Phone{% endtrans %}</th>
            <th data-sorted="true" data-type="numeric">{% trans %}Responded at{% endtrans %}</th>
            {% if going_rsvps -%}
              {% for key in going_rsvps[0].form %}
                <th>{{ key }}</th>
              {% endfor %}
            {%- endif %}
          </tr>
        </thead>
        <tbody>
          {%- for rsvp in going_rsvps %}
            <tr>
              <td data-cy="user">{{ rsvp.user.fullname }}</td>
              <td>
                {% with contact, contact_type = rsvp.best_contact() %}
                  {{ contact }}
                  {% if contact_type in ('ec', 'pc') %}
                    <em>{% trans %}(Unverified){% endtrans %}</em>
                  {% endif %}
                {%- endwith %}
              </td>
              <td data-cy="user" data-value="{{ rsvp.updated_at|timestamp }}">{{ rsvp.updated_at|datetime }}</td>
              {% for key in rsvp.form %}
                <td>{{ rsvp.form[key] }}</td>
              {% endfor %}
            </tr>
          {%- else %}
            <tr><td colspan="2"><em>{% trans %}No users{% endtrans %}</em></td></tr>
          {%- endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock left_col %}

{% block footerinnerscripts %}x
  <script src="{{ built_asset('rsvp_list.js') }}" type="text/javascript"></script>
{% endblock footerinnerscripts %}
