{% set current_page = 'participants' %}
{% extends "project_layout.html.jinja2" %}
{% block title %}{% trans %}View participants{% endtrans %}{% endblock title %}

{% block pageheaders %}
  {% assets "css_footable" -%}
    <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}" />
  {%- endassets -%}
{% endblock pageheaders %}

{% block left_col %}
  <div class="page-card page-card--nomargin">
    <div class="project-section mui-table--responsive-wrapper">
      <table class="mui-table mui-table--bordered mui-table--responsive participants">
        <thead>
          <tr>
            <th data-sorted="true">Name</th>
            <th data-sorted="true">Email/Phone</th>
            <th data-sorted="true" data-type="numeric">Responded at</th>
          </tr>
        </thead>
        <tbody>
          {%- for rsvp in going_rsvps %}
            <tr>
              <td data-cy="user">{{ rsvp.user.fullname }}</td>
              <td>
                {% with contact, contact_type = rsvp.best_contact() %}
                  {{ contact }}
                  {% if contact_type in ('ec', 'pc') %}
                    <em>{% trans %}(Unverified){% endtrans %}</em>
                  {% endif %}
                {%- endwith %}
              </td>
              <td data-cy="user" data-value="{{ rsvp.updated_at|timestamp }}">{{ rsvp.updated_at|datetime }}</td>
            </tr>
          {%- else %}
            <tr><td colspan="2"><em>No users</em></td></tr>
          {%- endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock left_col %}

{% block footerinnerscripts %}
  {% assets "js_footable" -%}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
  {%- endassets -%}
  <script src="{{ built_asset('rsvp_list.js') }}" type="text/javascript"></script>
{% endblock footerinnerscripts %}
