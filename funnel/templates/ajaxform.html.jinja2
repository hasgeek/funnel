<div>
  <link rel="stylesheet" type="text/css" href="{{ built_asset('css/form.scss') }}" />
  {% from "forms.html.jinja2" import renderform, ajaxform, widget_ext_scripts, widgetscripts %}
  {%- from "macros.html.jinja2" import alertbox -%}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        {{ alertbox(category, message) }}
      {% endfor %}
    {% endif %}
  {% endwith %}
  {%- if title -%}
    <p class="mui--text-title">{{ title }}</p>
  {%- endif -%}
  {%- if message %}
    <p class="form-message">{{ message }}</p>
  {%- endif %}
  {% block form %}
    {{ renderform(form=form, formid=formid, ref_id=ref_id, submit=submit, message=message, action=action, cancel_url=cancel_url, multipart=multipart, autosave=autosave, draft_revision=draft_revision) }}
  {% endblock %}
  {%- if with_chrome -%}
    {{ ajaxform(ref_id=ref_id, request=request, force=true) }}
  {%- endif -%}

  {{ widget_ext_scripts(form) }}

  <script type="text/javascript">
    activate_widgets();
    {{ widgetscripts(form, script=false) }}
    {% block form_script %}{% endblock %}
  </script>
</div>
